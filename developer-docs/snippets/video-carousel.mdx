import { useState } from 'react';

export const VideoCarousel = ({ urls = [] }) => {
  console.log("Hello there!")
  const [currentIndex, setCurrentIndex] = useState(0);

  const nextVideo = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === urls.length - 1 ? 0 : prevIndex + 1
    );
  };

  const previousVideo = () => {
    setCurrentIndex((prevIndex) =>
      prevIndex === 0 ? urls.length - 1 : prevIndex - 1
    );
  };

  if (!urls.length) return null;

  return (
    <div className="relative w-full max-w-3xl min-h-30vh mx-auto">
      <div className="relative aspect-video">
        <iframe
          title={urls[currentIndex].title}
          src={urls[currentIndex].url}
          className="w-full h-full h-[30vh] rounded-lg aspect-video"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowFullScreen
        />
      </div>

      {urls.length > 1 && (
        <div className="flex justify-between mt-4">
          <button
            type="button"
            onClick={previousVideo}
            className="px-4 py-2 rounded-lg border-2"
          >
            Previous
          </button>
          <div className="align-center mx-3 flex flex-row justify justify-around">{urls[currentIndex].title.length > 50 ? urls[currentIndex].title.slice(0, 50) + "..." : urls[currentIndex].title}</div>
          <button
            type="button"
            onClick={nextVideo}
            className="px-4 py-2 rounded-lg border-2"
          >
            Next
          </button>
        </div>
      )}
    </div>
  );
};